package me.ht9.end.feature.module.exploit.secretclose;

import me.ht9.end.event.bus.annotation.SubscribeEvent;
import me.ht9.end.event.events.PacketEvent;
import me.ht9.end.feature.module.Module;
import me.ht9.end.feature.module.annotation.Description;
import net.minecraft.src.GuiMainMenu;
import net.minecraft.src.GuiScreen;
import net.minecraft.src.Packet101CloseWindow;

@Description("Close the container secretly.")
public class SecretClose extends Module
{
    private static final SecretClose instance = new SecretClose();

    private GuiScreen guiScreen;

    private SecretClose()
    {
        this.setArrayListInfo(() -> "");
    }

    @Override
    public void onEnable()
    {
        this.guiScreen = mc.currentScreen;
    }

    @SubscribeEvent
    public void onPacket(PacketEvent event)
    {
        if (event.isServerBound())
        {
            if (event.getPacket().getPacketId() == 101)
            {
                System.out.println("1");
                event.setCancelled(true);
            }
        }
    }

    @Override
    public void onDisable()
    {
        mc.displayGuiScreen(this.guiScreen);
    }

    public static SecretClose getInstance()
    {
        return instance;
    }
}
